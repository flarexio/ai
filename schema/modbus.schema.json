{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "description": "A request to read data points from a Modbus device.",
  "properties": {
    "protocol": {
      "type": "string",
      "enum": ["modbustcp", "modbusrtu", "modbusascii"],
      "default": "modbustcp",
      "description": "The communication protocol used for Modbus."
    },
    "address": {
      "type": "string",
      "description": "The address of the Modbus server, e.g., '127.0.0.1:502'."
    },
    "options": {
      "type": "object",
      "description": "Modbus server options including slave ID and serial configuration.",
      "properties": {
        "slaveId": {
          "type": "integer",
          "minimum": 1,
          "maximum": 247,
          "default": 1,
          "description": "The Modbus slave ID, ranging from 1 to 247."
        }
      },
      "required": ["slaveId"]
    },
    "points": {
      "type": "array",
      "description": "A list of data points to read from the Modbus device.",
      "items": {
        "type": "object",
        "description": "Defines a single Modbus data point to be read.",
        "properties": {
          "register": {
            "type": "string",
            "enum": ["coil_status", "input_status", "holding_register", "input_register"],
            "description": "The type of register being accessed."
          },
          "address": {
            "type": "integer",
            "minimum": 0,
            "description": "The starting address of the register."
          },
          "quantity": {
            "type": "integer",
            "minimum": 1,
            "description": "The number of registers or bits to read."
          },
          "offset": {
            "type": "integer",
            "minimum": 0,
            "description": "The offset within the register."
          },
          "unit": {
            "type": "string",
            "enum": ["bit", "word", "dword", "qword"],
            "description": "The unit size of the data."
          },
          "dataType": {
            "type": "string",
            "enum": ["bool", "uint", "int", "float", "string", "unicode", "bcd", "binary"],
            "description": "The format in which the data is interpreted."
          },
          "byteOrder": {
            "type": "string",
            "enum": ["big_endian", "little_endian"],
            "default": "big_endian",
            "description": "The byte order used for multi-byte values."
          },
          "wordOrder": {
            "type": "string",
            "enum": ["big_endian", "little_endian"],
            "default": "little_endian",
            "description": "The word order used for multi-word values."
          }
        },
        "required": ["register", "address", "quantity", "unit", "dataType"]
      }
    }
  },
  "required": ["protocol", "address", "options", "points"]
}
